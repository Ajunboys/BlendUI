<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Blendui-hybrid自动化测试</title>
    <link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.15.0.css"/>
    <script src="http://code.jquery.com/qunit/qunit-1.15.0.js"></script>
    <script src="../dist/BlendHybridUI.min.js"></script>
</head>
<body>
    <div id="qunit"></div>
    <script>
document.addEventListener('blendready',function(){


    ////////////////////////////////////
    //////////Runtime环境测试//////////
    ////////////////////////////////////
    QUnit.module( "Runtime环境测试", {
        ua:navigator.userAgent
    });

    QUnit.test( "ua test", function( assert ) {
        assert.ok( this.ua.match(/BaiduLightAppRuntime/ig), "ua中含有runtime字段");
        assert.ok( this.ua.match(/Blend/ig), "ua中含有blend字段");
    });
    
    ////////////////////////////////////
    //////////native接口/////////
    ////////////////////////////////////
    var bridge = window.nuwa_frame || window.lc_bridge
    QUnit.module( "native接口效验", {
    });

    QUnit.test("layer接口", function( assert ) {
        assert.ok(bridge, "bridge");
        assert.ok(bridge.prepareLayer, "prepareLayer接口");
        assert.ok(bridge.resumeLayer, "resumeLayer接口");
        assert.ok(bridge.backToPreviousLayer, "backToPreviousLayer接口");
        assert.ok(bridge.hideSubLayer, "hideSubLayer接口");
        assert.ok(bridge.layerLoadUrl, "layerLoadUrl接口");
        assert.ok(bridge.destroyLayer, "destroyLayer接口");
        assert.ok(bridge.layerSetPullRefresh, "layerSetPullRefresh接口");
        assert.ok(bridge.layerStopRefresh, "layerStopRefresh接口");
        assert.ok(bridge.isLayerAvailable, "isLayerAvailable接口");
        assert.ok(bridge.currentLayerUrl, "currentLayerUrl接口");
        assert.ok(bridge.currentLayerId, "layerStopRefresh接口");
        assert.ok(bridge.layerStopLoading, "layerStopLoading接口");
        assert.ok(bridge.layerPostMessage, "layerPostMessage接口");
        assert.ok(bridge.layerGetOriginalUrl, "layerGetOriginalUrl接口");
        
        assert.ok(bridge.layerGetUrl, "layerGetUrl接口");
        assert.ok(bridge.layerCanGoBack, "layerCanGoBack接口");
        assert.ok(bridge.layerCanGoBackOrForward, "layerCanGoBackOrForward接口");
        
        assert.ok(bridge.isLayerActive, "isLayerActive接口");
        assert.ok(bridge.layerClearHistory, "layerClearHistory接口");
        assert.ok(bridge.layerSetLayout, "layerSetLayout接口");
    });
    
    QUnit.test("layerGroup接口", function( assert ) {
        assert.ok(bridge, "bridge");
        assert.ok(bridge.addLayerGroup, "addLayerGroup");
        assert.ok(bridge.showLayerInGroup, "showLayerInGroup");
        assert.ok(bridge.canLayerGroupScroll, "canLayerGroupScroll");
        assert.ok(bridge.setCanLayerGroupScroll, "setCanLayerGroupScroll");
        
        assert.ok(bridge.removeLayerGroup, "removeLayerGroup");
        assert.ok(bridge.layerGroupSetLayout, "layerGroupSetLayout");
        assert.ok(bridge.hideLayerGroup, "hideLayerGroup");
    });
    
    QUnit.test("组件接口", function( assert ) {
        assert.ok(bridge, "bridge");
        assert.ok(bridge.addComponent, "addComponent");
        assert.ok(bridge.componentExecuteNative, "componentExecuteNative");
    });
    

    ////////////////////////////////////
    //////////blend命名空间测试/////////
    ////////////////////////////////////
    QUnit.module( "blend命名空间测试", {
        blendui: Blend.ui
    });

    QUnit.test( "Blend.ui命名空间", function( assert ) {
        assert.ok(Blend, "含有Blend");
        assert.ok(this.blendui,"含有Blend.ui");
        assert.ok(this.blendui.Layer, "含有Blend.ui.Layer");
        assert.ok(this.blendui.LayerGroup, "含有Blend.ui.LayerGroup");
        assert.ok(this.blendui.Footbar, "含有Blend.ui.Footbar");
        assert.ok(this.blendui.Slider, "含有Blend.ui.Slider");
        
        assert.ok(this.blendui.on, "含有Blend.ui.on");
        assert.ok(this.blendui.once, "含有Blend.ui.once");
        assert.ok(this.blendui.postMessage, "含有Blend.ui.postMessage");
        assert.ok(this.blendui.fire, "含有Blend.ui.fire");
        assert.ok(this.blendui.off, "含有Blend.ui.off");
        assert.ok(this.blendui.ready, "含有Blend.ui.ready");
        
        
        assert.ok(this.blendui.get, "含有Blend.ui.get");
        assert.ok(this.blendui.cancel, "含有Blend.ui.cancel");
        
        
        assert.ok(this.blendui.layerBack, "含有Blend.ui.layerBack");
        assert.ok(this.blendui.layerInit, "含有Blend.ui.layerInit");
        assert.ok(this.blendui.layerBack, "含有Blend.ui.layerBack");
        assert.ok(this.blendui.getLayerId, "含有Blend.ui.getLayerId");
        assert.ok(this.blendui.layerSetPullRefresh, "含有Blend.ui.layerSetPullRefresh");
        assert.ok(this.blendui.layerStopLoading, "含有Blend.ui.layerStopLoading");
        assert.ok(this.blendui.removeSplashScreen, "含有Blend.ui.removeSplashScreen");
        assert.ok(this.blendui.launchApp, "含有Blend.ui.launchApp");
        assert.ok(this.blendui.exitApp, "含有Blend.ui.exitApp");
        assert.ok(this.blendui.keyboard, "含有Blend.ui.keyboard");
    });
    
});
    </script>
</body>
</html>
